<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>piano</title>

    <link rel="stylesheet" href="main.css">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css">
</head>
<body>
    <table>
        <tr class="key">
            <td id="do">
                <img type="button" src="img/Do.png">
            </td>
            <td id="re">
                <img src="img/Re.png">
            </td>
            <td id="mi">
                <img src="img/Mi.png">
            </td>
            <td id="fa">
                <img src="img/Fa.png">
            </td>
            <td id="so">
                <img src="img/So.png">
            </td>
            <td id="la">
                <img src="img/La.png">
            </td>
            <td id="si">
                <img src="img/Si.png">
            </td>
        </tr>
        <tr >
            <td class="lab">Do</td>
            <td class="lab">Re</td>
            <td class="lab">Mi</td>
            <td class="lab">Fa</td>
            <td class="lab">So</td>
            <td class="lab">La</td>
            <td class="lab">Si</td>
        </tr>        
    </table>
    <table>
    <tr>

        <td>
            <img src="img/play.png" type="button" id="littlestarstar">        
        </td>
    </tr>
    </table>
    <script>
    
            setup();        
        
            var Do = document.getElementById("do");
            var Re = document.getElementById("re");
            var Mi = document.getElementById("mi");
            var Fa = document.getElementById("fa");
            var So = document.getElementById("so");
            var La = document.getElementById("la");
            var Si = document.getElementById("si");
            var Lss = document.getElementById("littlestarstar"); 
            var lso;
            var lsp;
            lso.src= './img/play.png';
            lsp.src='./img/pause.png';

        
            Do.addEventListener('touchstart', function(event) {
                cpf.request('["tone_play", 6 , 261,100],["sleep",100]');
            });
            Re.addEventListener('touchstart', function(event) {
                cpf.request('["tone_play", 6 , 293,100],["sleep",100]');
            });
            Mi.addEventListener('touchstart', function(event) {
                cpf.request('["tone_play", 6 , 329,100],["sleep",100]');
            });
            Fa.addEventListener('touchstart', function(event) {
                cpf.request('["tone_play", 6 , 349,100],["sleep",100]');
            });
            So.addEventListener('touchstart', function(event) {
                cpf.request('["tone_play", 6 , 392,100],["sleep",100]');
            });
            La.addEventListener('touchstart', function(event) {
                cpf.request('["tone_play", 6 , 440,100],["sleep",100]');
            });
            Si.addEventListener('touchstart', function(event) {
                cpf.request('["tone_play", 6 , 493,100],["sleep",100]');
            });
            Lss.addEventListener('touchstart', function(event) {                
                if(Lss.src==lso.src){
                   Lss.src= './img/pause.png';
                    star();
               }
                else if(Lss.src==lsp.src){
                    Lss.src= './img/play.png';
                    cpf.request('["digitalWrite", 5 , 0]');                
                }
               
            });
            

            function star(){
                var starmusic = [1,1,5,5,6,6,8,4,4,3,3,2,2,9,
                                 5,5,4,4,3,3,10,5,5,4,4,3,3,10,
                                 1,1,5,5,6,6,8,4,4,3,3,2,2,9];
                for(i=0;i < starmusic.length;i++){                   
                    switch(starmusic[i]){                        
                        case 1:
                        cpf.request('["tone_play", 6 , 261,200],["sleep",200]');
                        break;
                        case 2:
                        cpf.request('["tone_play", 6 , 293,200],["sleep",200]');
                        break;
                        case 3:
                        cpf.request('["tone_play", 6 , 329,200],["sleep",200]');
                        break;
                        case 4:
                        cpf.request('["tone_play", 6 , 349,200],["sleep",200]');
                        break;
                        case 5:
                        cpf.request('["tone_play", 6 , 392,200],["sleep",200]');
                        break;
                        case 6:
                        cpf.request('["tone_play", 6 , 440,200],["sleep",200]');
                        break;
                        case 7:
                        cpf.request('["tone_play", 6 , 493,200],["sleep",200]');
                        break;
                        case 8:
                        cpf.request('["tone_play", 6 , 392,400],["sleep",400]');
                        break;
                        case 9:
                        cpf.request('["tone_play", 6 , 261,400],["sleep",400]');
                        break;
                        case 10:
                        cpf.request('["tone_play", 6 , 293,400],["sleep",400]');
                        break;
                    }
                    /*if((i+1)%4==0){
                        cpf.request('["sleep",100]');
                    }*/
                }

            }
        
            function setup(){
                if(cpf){
                    cpf.setPinMode('["resetPin"],["setPinMode","digital",6,"TONE"]');
                }
            }
            </script>
</body>

</html>